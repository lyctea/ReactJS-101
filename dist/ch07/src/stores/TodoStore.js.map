{"version":3,"sources":["../../../../ch07/src/stores/TodoStore.js"],"names":["store","todos","editing","TodoStoreClass","callback","on","removeListener","TodoStore","AppDispatcher","register","action","type","push","payload","text","emit"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;;;;;;;AAEA;AACA,IAAMA,QAAQ;AACVC,WAAO,EADG;AAEVC,aAAS;AAFC,CAAd;;IAKMC,c;;;;;;;;;;;0CACgBC,Q,EAAS;AACvB,iBAAKC,EAAL,wBAAkBD,QAAlB;AACH;;;6CAEoBA,Q,EAAS;AAC1B,iBAAKE,cAAL,wBAA8BF,QAA9B;AACH;;;mCACS;AACN,mBAAOJ,MAAMC,KAAb;AACH;;;;;;AAGL,IAAMM,YAAY,IAAKJ,cAAL,EAAlB;;AAEAK,cAAcC,QAAd,CAAuB,UAACC,MAAD,EAAY;AAC/B,YAAQA,OAAOC,IAAf;AACI;AACIX,kBAAMC,KAAN,CAAYW,IAAZ,CAAiBF,OAAOG,OAAP,CAAeC,IAAhC;AACAP,sBAAUQ,IAAV;AACA;AACJ;AACI,mBAAO,IAAP;AANR;AAQA,WAAO,IAAP;AACH,CAVD;;kBAYeR,S","file":"TodoStore.js","sourcesContent":["import AddDispatcher from '../dispatcher/AppDispatcher';\r\nimport { ADD_TODO } from '../constants/actionTypes';\r\nimport { EventEmitter } from 'events';\r\n\r\n// const CHANGE_EVENT = 'change'\r\nconst store = {\r\n    todos: [],\r\n    editing: false,\r\n};\r\n\r\nclass TodoStoreClass extends EventEmitter {\r\n    addChangeListener(callback){\r\n        this.on(ADD_TODO, callback);\r\n    }\r\n\r\n    removeChangeListener(callback){\r\n        this.removeListener(ADD_TODO, callback);\r\n    }\r\n    getTodos(){\r\n        return store.todos;\r\n    }\r\n}\r\n\r\nconst TodoStore = new  TodoStoreClass();\r\n\r\nAppDispatcher.register((action) => {\r\n    switch (action.type){\r\n        case ADD_TODO:\r\n            store.todos.push(action.payload.text);\r\n            TodoStore.emit(ADD_TODO);\r\n            break;\r\n        default:\r\n            return true;\r\n    }\r\n    return true;\r\n});\r\n\r\nexport default TodoStore;"]}